{%extends 'base.html'%}
{%block content%}
{% load static %}


<div class="container" style="height: 100%">
    <!--    info-->
    {%if messages%}
    {%for message in messages%}
    <div class="alert {%if message.tags == 'error'%}alert-danger {%else%}alert-{{message.tags}}{%endif%} alert-dismissible"
         role="alert">
        <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
        {{message}}
    </div>
    {%endfor%}
    {%endif%}

    <!--    obrazki-->
    {%if view.kwargs.username%}
    <h1 class="mb-3">Obrazy dodane przez użytkownika: <img class="rounded-circle" src="{{view.kwargs.img}}" width="50px"
                                                           height="50px" class="mr-2"/> {{view.kwargs.username}}
        ({{page_obj.paginator.count}})</h1>
    <hr>
    {%endif%}


    <div class="row pt-3">


        {%for obrazek in object_list %}
        <figure class="col-md-6 col-lg-4">
            <a href="{%url 'detail' id_obrazka=obrazek.id%}">
                <div class="obr">
                    <img
                            {%if obrazek.obrazek_path%}
                            src="{{obrazek.obrazek_path}}"
                            {%else%}
                            src="{{obrazek.obrazek_file.url}}"
                            {%endif%}
                            style="height:100%; width:100%"
                         class="img-fluid zdjecie rounded ">
                </div>
            </a>

            <div class="bottom-left ">&#11088;: {{obrazek.srednia_ocen}}<small
                    class="text-muted ml-1">{{obrazek.count}}</small></div>
            {{test}}
            <div class="bottom-right">Komentarze: {{obrazek.kometarz_set.count}}</div>
            <h3 class="text-center my-3 pb-2">{{obrazek.tytul}}</h3>
        </figure>

        {%endfor%}


    </div>

    <!--Pagination-->
    {% if is_paginated%}

    <div class="btn-toolbar col-12 d-flex justify-content-between" role="toolbar"
         aria-label="Toolbar with button groups">
        <!--first-->
        <div class="btn-group mr-2 d-none d-md-block" role="group" aria-label="First group">
            <a href="?page=1">
                <button type="button" class="btn btn-outline-primary" {%if not page_obj.has_previous%}disabled{%endif%}>

                    Pierwsza
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                         class="bi bi-arrow-90deg-left" viewBox="0 0 16 16">
                        <path fill-rule="evenodd"
                              d="M1.146 4.854a.5.5 0 0 1 0-.708l4-4a.5.5 0 1 1 .708.708L2.707 4H12.5A2.5 2.5 0 0 1 15 6.5v8a.5.5 0 0 1-1 0v-8A1.5 1.5 0 0 0 12.5 5H2.707l3.147 3.146a.5.5 0 1 1-.708.708l-4-4z"/>
                    </svg>
                </button>
            </a>
        </div>

        <div class="btn-group mr-2 col-md-8 col-lg-6" role="group" aria-label="Second group">
            <!--previous-->
            <a class="btn btn-secondary {%if not page_obj.has_previous%}disabled" {%else%}"href="?page={{page_obj.previous_page_number}}{%endif%}">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                 class="bi bi-arrow-left-short" viewBox="0 0 16 16">
                <path fill-rule="evenodd"
                      d="M12 8a.5.5 0 0 1-.5.5H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5a.5.5 0 0 1 .5.5z"/>
            </svg>
            Poprzednia</a>

            <!--Near-->
            {% for num in page_obj.paginator.page_range %}
            {% if page_obj.number == num%}
            <a class="btn btn-outline-secondary " href="?page={{num}}">{{num}}</a>
            {%elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3'%}
            <a class="btn btn-secondary " href="?page={{num}}">{{num}}</a>
            {%endif%}
            {%endfor%}

            <!--next-->
            <a class="btn btn-secondary {%if not page_obj.has_next%}disabled" {%else%}"
            href="?page={{page_obj.next_page_number}}" {%endif%}>Następna
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                 class="bi bi-arrow-right-short" viewBox="0 0 16 16">
                <path fill-rule="evenodd"
                      d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"/>
            </svg>
            </a>

        </div>
        <!--last-->
        <div class="btn-group d-none d-md-block" role="group" aria-label="Third group">
            <a href="?page={{page_obj.paginator.num_pages}}">
                <button type="button" class="btn btn-outline-primary" {%if not page_obj.has_next%}disabled{%endif%}>
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                         class="bi bi-arrow-90deg-right" viewBox="0 0 16 16">
                        <path fill-rule="evenodd"
                              d="M14.854 4.854a.5.5 0 0 0 0-.708l-4-4a.5.5 0 0 0-.708.708L13.293 4H3.5A2.5 2.5 0 0 0 1 6.5v8a.5.5 0 0 0 1 0v-8A1.5 1.5 0 0 1 3.5 5h9.793l-3.147 3.146a.5.5 0 0 0 .708.708l4-4z"/>
                    </svg>
                    Ostatnia
                </button>
            </a>
        </div>


    </div>


    {%endif%}

    <!--end container-->
</div>


<footer id="footer" class="page-footer bottom col-12 footer font-small blue">

    <!-- Copyright -->
    <div class="footer-copyright text-center  col-12 py-3">© 2021 Copyright
        <span style="color: #007bff;"> Jakub Biernacki</span>
    </div>

    <!-- Copyright -->
</footer>

<script src="{%static 'home.js'%}"></script>


{%endblock%}